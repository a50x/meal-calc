<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Custom Meal Plan Generator</title>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { font-size: 24px; }
    label { display: block; margin-top: 10px; }
    table { border-collapse: collapse; margin-top: 15px; width: 100%; }
    th, td { border: 1px solid #ddd; padding: 8px; text-align: center; }
    th { background: #f4f4f4; }
    .meal { margin-bottom: 30px; }
  </style>
</head>
<body>
  <h1>Safe Foods Meal Plan Generator</h1>
  <label>Protein target (g): <input id="proteinTarget" type="number" value="190"></label>
  <label>Protein ± range (g): <input id="proteinRange" type="number" value="10"></label>

  <label>Carbs target (g): <input id="carbTarget" type="number" value="220"></label>
  <label>Carbs ± range (g): <input id="carbRange" type="number" value="20"></label>

  <label>Fat target (g): <input id="fatTarget" type="number" value="65"></label>
  <label>Fat ± range (g): <input id="fatRange" type="number" value="10"></label>

  <label>Calories target: <input id="calTarget" type="number" value="2600"></label>
  <label>Calories ± range: <input id="calRange" type="number" value="200"></label>

  <label>Max shakes/creami per day: <input id="maxShakes" type="number" value="2" min="0"></label>
  <label>Max meal repeats: <input id="mealRepeats" type="number" value="1" min="1"></label>

  <label>Meals per day: 
    <select id="mealCount">
      <option value="optimal">Optimal</option>
      <option value="3">3 meals</option>
      <option value="4">4 meals</option>
      <option value="5">5 meals</option>
    </select>
  </label>

  <button onclick="generatePlan()">Generate Meal Plan</button>

  <div id="output"></div>

<script>
const foods = [
  { name: "Quaker Oatmeal (Maple packet)", kcal:160, p:4, c:33, f:2 },
  { name: "Bagel + cream cheese", kcal:300, p:9, c:55, f:6 },
  { name: "Cereal + whole milk (Cheerios)", kcal:280, p:9, c:42, f:8 },
  { name: "Cereal + Fairlife milk (Protein Cheerios)", kcal:300, p:16, c:36, f:10.5 },
  { name: "Oui Vanilla Yogurt + Granola", kcal:250, p:7, c:32, f:9 },
  { name: "Chobani Flip (various flavors)", kcal:160, p:9, c:21, f:4.5 },
  { name: "Carnation Breakfast Essentials HP", kcal:220, p:15, c:27, f:6 },
  { name: "Ghost Protein + Horizon milk", kcal:250, p:30, c:12, f:5 },
  { name: "Brownie Protein Creami", kcal:220, p:35, c:13, f:3 },
  { name: "Vanilla Protein Creami", kcal:210, p:38, c:10, f:2 },
  { name: "Cookies & Cream Protein Creami", kcal:170, p:26, c:6, f:3 },
  { name: "Chicken tenders (breaded frozen) + ketchup", kcal:280, p:26.5, c:12.5, f:14.5 },
  { name: "Impossible Nuggets (5pc) + ketchup", kcal:260, p:14, c:20, f:12.5 },
  { name: "Fish sticks + ketchup", kcal:250, p:12, c:20, f:14 },
  { name: "Cheeseburger (patty + bun + ketchup)", kcal:430, p:30, c:32, f:16 },
  { name: "Beef slider (mini cheeseburger + ketchup)", kcal:240, p:16, c:16, f:8 },
  { name: "Hot dog + bun + ketchup", kcal:310, p:11, c:28, f:18 },
  { name: "Tony’s Pizza (1/4 pizza)", kcal:330, p:12, c:38, f:14 },
  { name: "White/Jasmine Rice + Kerrygold butter + salt", kcal:250, p:5, c:45, f:6 },
  { name: "Annie’s Protein Mac", kcal:320, p:15, c:60, f:6 },
  { name: "Barilla Protein+ Pasta + marinara", kcal:190, p:17, c:35, f:2 },
  { name: "French fries + ketchup", kcal:300, p:4, c:50, f:12 },
  { name: "Tater tots + ketchup", kcal:280, p:4, c:40, f:14 },
  { name: "Corn + butter & garlic", kcal:180, p:4, c:30, f:6 },
  { name: "Apple slices", kcal:80, p:0, c:22, f:0 },
  { name: "Banana", kcal:105, p:1, c:27, f:0 },
  { name: "Grapes", kcal:90, p:0, c:23, f:0 },
  { name: "Strawberries", kcal:50, p:1, c:12, f:0 },
  { name: "Watermelon", kcal:90, p:1, c:23, f:0 },
  { name: "Rice Krispy Treat", kcal:90, p:1, c:18, f:2 },
  { name: "FitCrunch Bar", kcal:190, p:16, c:15, f:8 }
];

// Check if food is shake/creami
function isShakeOrCreami(food) {
  return /(Ghost Protein|Carnation Breakfast|Creami)/.test(food.name);
}

function generatePlan() {
  const pTarget = parseInt(document.getElementById("proteinTarget").value);
  const pRange = parseInt(document.getElementById("proteinRange").value);
  const cTarget = parseInt(document.getElementById("carbTarget").value);
  const cRange = parseInt(document.getElementById("carbRange").value);
  const fTarget = parseInt(document.getElementById("fatTarget").value);
  const fRange = parseInt(document.getElementById("fatRange").value);
  const calTarget = parseInt(document.getElementById("calTarget").value);
  const calRange = parseInt(document.getElementById("calRange").value);

  const maxShakes = parseInt(document.getElementById("maxShakes").value);
  const mealRepeats = parseInt(document.getElementById("mealRepeats").value);
  const mealCountSel = document.getElementById("mealCount").value;

  let mealCount;
  if (mealCountSel === "optimal") {
    if (calTarget < 2400) mealCount = 3;
    else if (calTarget < 2800) mealCount = 4;
    else mealCount = 5;
  } else {
    mealCount = parseInt(mealCountSel);
  }

  let plan = [];
  let totals = {kcal:0,p:0,c:0,f:0};
  let shakeCount = 0;
  let foodCount = {};

  while (plan.length < mealCount) {
    let food = foods[Math.floor(Math.random()*foods.length)];

    if (isShakeOrCreami(food) && shakeCount >= maxShakes) continue;
    if (foodCount[food.name] >= mealRepeats) continue;

    plan.push(food);
    totals.kcal += food.kcal;
    totals.p += food.p;
    totals.c += food.c;
    totals.f += food.f;

    if (isShakeOrCreami(food)) shakeCount++;
    foodCount[food.name] = (foodCount[food.name]||0) + 1;
  }

  const output = document.getElementById("output");
  let html = "";

  let idx=1;
  plan.forEach(food=>{
    html += `<div class="meal"><table><tr><th>Meal ${idx}</th><th>kcal</th><th>P</th><th>C</th><th>F</th></tr>`;
    html += `<tr><td>${food.name}</td><td>${food.kcal}</td><td>${food.p}</td><td>${food.c}</td><td>${food.f}</td></tr></table></div>`;
    idx++;
  });

  html += `<h3>Day Totals</h3>
  <table>
  <tr><th>Calories</th><th>Protein</th><th>Carbs</th><th>Fat</th></tr>
  <tr><td>${totals.kcal}</td><td>${totals.p}</td><td>${totals.c}</td><td>${totals.f}</td></tr>
  </table>`;

  output.innerHTML = html;
}
</script>
</body>
</html>
